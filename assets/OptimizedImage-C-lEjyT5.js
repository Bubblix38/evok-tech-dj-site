import{j as e}from"./ui-gJEqDpdJ.js";import{r}from"./vendor-Ber6wfih.js";const t=({src:t,alt:s,className:n="",placeholder:a,width:i,height:l,priority:c=!1,onLoad:o,onError:d,...u})=>{const[m,h]=r.useState(!1),[g,f]=r.useState(!1),[v,x]=r.useState(c),j=r.useRef(null),p=r.useRef(null);r.useEffect(()=>{if(!c&&!v)return p.current=new IntersectionObserver(e=>{e.forEach(e=>{var r;e.isIntersecting&&(x(!0),null==(r=p.current)||r.disconnect())})},{rootMargin:"50px",threshold:.1}),j.current&&p.current.observe(j.current),()=>{var e;null==(e=p.current)||e.disconnect()}},[c,v]);return e.jsxs("div",{ref:j,className:`relative overflow-hidden ${n}`,style:{width:i,height:l},...u,children:[!m&&!g&&e.jsx("div",{className:"absolute inset-0 bg-muted animate-pulse flex items-center justify-center",style:{backgroundColor:a||"hsl(var(--muted))",minHeight:l||"200px"},children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}),g&&e.jsx("div",{className:"absolute inset-0 bg-muted flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ“·"}),e.jsx("div",{className:"text-sm",children:"Falha ao carregar imagem"})]})}),v&&e.jsx("img",{src:(b=t,b.includes(".png")||b.includes(".jpg")||b.includes(".jpeg"),b),alt:s,className:`transition-opacity duration-300 ${m?"opacity-100":"opacity-0"} w-full h-full object-cover`,onLoad:()=>{h(!0),null==o||o()},onError:()=>{f(!0),null==d||d()},loading:c?"eager":"lazy",decoding:"async",style:{width:"100%",height:"100%",objectFit:"cover"}})]});var b};export{t as O};
